{"version":3,"sources":["webpack:///./float-view/src/common/customEvents.js","webpack:///./float-view/src/index.js","webpack:///./float-view/src/lib/entity.js","webpack:///./float-view/src/lib/entityActions.js","webpack:///./float-view/src/lib/visualization.js"],"names":["CustomEventsCollection","dataJSON","bubbles","composed","params","detail","CustomEvent","resetCanvas","selectEntity","previewEntity","FloatView","html","containerName","Date","now","host","root","containerDOM","querySelector","addEventListener","ce","dispatchEvent","resetCanvasObj","imgPathPrefix","objectArray","bgColor","_drawVisualization","data","parentWidth","offsetWidth","parentHeight","offsetHeight","_p5","innerHTML","_viz","Visualization","p5","sketch","bind","String","Array","PolymerElement","window","customElements","define","is","Entity","p","w","h","data_min_x","data_min_y","data_range_x","data_range_y","selected_border_width","status","statuses","PLAIN","embed","z","absW","width","absH","height","size","img_size","wRadius","hRadius","wCorner","hCorner","xOffset","z_2d","yOffset","x","y","loadImage","filename","image","img","console","log","noStroke","fill","rect","mouseX","mouseY","reducer","types","CLEAR","PREVIEW","SELECT","PREVIEWED","SELECTED","isMouseHit","inititalState","position","type","entity","displayPlainEntity","display","isActive","displayPreview","displaySelected","setup","draw","mousePressed","mouseReleased","mouseClicked","self","entityList","startTime","endTime","checkpointTime","longPressMs","startMouseX","startMouseY","mouseClickMoveTolerance","createCanvas","i","length","push","reset","noLoop","timeNow","timeDifferenceMs","Math","abs","select","loop","preview","background","actionTypes","dispatch","previewEntityObj","selectEntityObj","eventObject"],"mappings":"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","file":"float-view.bundle.js","sourcesContent":["class CustomEventsCollection {\n  constructor() {}\n\n  static get resetCanvas() {\n    return \"reset-canvas\";\n  }\n\n  static get selectEntity() {\n    return \"select-entity\";\n  }\n\n  static get previewEntity() {\n    return \"preview-entity\";\n  }\n\n  static resetCanvasObj(dataJSON = null, bubbles = true, composed = true) {\n    let params = {\n      detail: dataJSON,\n      bubbles,\n      composed\n    };\n    return new CustomEvent(this.resetCanvas, params);\n  }\n\n  static selectEntityObj(dataJSON = null, bubbles = true, composed = true) {\n    let params = {\n      detail: dataJSON,\n      bubbles,\n      composed\n    };\n    return new CustomEvent(this.selectEntity, params);\n  }\n\n  static previewEntityObj(dataJSON = null, bubbles = true, composed = true) {\n    let params = {\n      detail: dataJSON,\n      bubbles,\n      composed\n    };\n    return new CustomEvent(this.previewEntity, params);\n  }\n}\n\nexport default CustomEventsCollection;\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport 'p5/lib/p5.min.js';\nimport 'p5/lib/addons/p5.dom.js';\nimport Visualization from './lib/visualization.js';\nimport ce from \"./common/customEvents.js\";\n\n/**\n * `float-view`\n * Takes in list of json. Present as floating object points that contains pop-over information.\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass FloatView extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          height: 100%;\n          width: 100%;\n        }\n\n        canvas {\n          visibility: inherit !important;\n        }\n      </style>\n      <div id=\"[[containerName]]\">\n      </div>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.containerName = \"canvas-container_\" + Date.now();\n  }\n\n  ready() {\n    super.ready();\n    // Propagate events doesn to the P5 canvas.\n    let host = this.root.host;\n    let containerDOM = this.root.querySelector(`#${this.containerName}`);\n    host.addEventListener(ce.resetCanvas, e => {\n      containerDOM.dispatchEvent(ce.resetCanvasObj(null, false, false));\n    });\n  }\n\n  static get is() {\n    return 'float-view';\n  }\n\n  static get properties() {\n    return {\n      imgPathPrefix: String,\n      bgColor: String,\n      objectArray: Array\n    };\n  }\n\n  static get observers() {\n    return [\n      \"resourceChanged(imgPathPrefix, objectArray, bgColor)\"\n    ];\n  }\n\n  resourceChanged(imgPathPrefix, objectArray, bgColor) {\n    if (!imgPathPrefix || !objectArray) {\n      return;\n    }\n    this._drawVisualization(imgPathPrefix, objectArray, bgColor);\n  }\n\n  _drawVisualization(imgPathPrefix, data, bgColor) {\n    let containerDOM = this.root.querySelector(`#${this.containerName}`);\n    let parentWidth = this.root.host.offsetWidth;\n    let parentHeight = this.root.host.offsetHeight;\n    if (this._p5) {\n      containerDOM.innerHTML = ``;\n    }\n    this._viz = new Visualization(imgPathPrefix, data, containerDOM, parentWidth, parentHeight, bgColor);\n    this._p5 = new p5(this._viz.sketch.bind(this._viz), containerDOM);\n  }\n}\n\nwindow.customElements.define(FloatView.is, FloatView);\n","import { statuses } from \"./entityActions.js\";\nimport CustomEventsCollection from \"../common/customEvents.js\";\n\nclass Entity {\n  constructor(imgPathPrefix,\n              p,\n              data,\n              w = 20,\n              h = 20,\n              data_min_x = -35,\n              data_min_y = -43,\n              data_range_x = 70,\n              data_range_y = 86,\n              selected_border_width = 3) {\n    this.status = statuses.PLAIN;\n    this.imgPathPrefix = imgPathPrefix;\n    this.p = p;\n    this.data = data;\n    this.w = w;\n    this.h = h;\n    this.data_min_x = data_min_x;\n    this.data_min_y = data_min_y;\n    this.data_range_x = data_range_x;\n    this.data_range_y = data_range_y;\n    this.embed = this.data.z;\n    this.selected_border_width = selected_border_width;\n    this.absW = this.p.width;\n    this.absH = this.p.height;\n    this.size = data.img_size;\n    this.wRadius = this.w / 2;\n    this.hRadius = this.h / 2;\n    this.wCorner = this.absW - this.wRadius;\n    this.hCorner = this.absH - this.hRadius;\n    let xOffset = this.absW * (data.z_2d[0] - this.data_min_x)/this.data_range_x;\n    let yOffset = this.absH * (data.z_2d[1] - this.data_min_y)/this.data_range_y;\n    this.x = (xOffset < this.wRadius) ? this.wRadius : ((xOffset > this.wCorner) ? this.wCorner : xOffset);\n    this.y = (yOffset < this.hRadius) ? this.hRadius : ((yOffset > this.hCorner) ? this.hCorner : yOffset);\n  }\n\n  get mouseX() {\n    return this.p.mouseX;\n  }\n\n  get mouseY() {\n    return this.p.mouseY;\n  }\n\n  get position() {\n    return {\n      mouseX: this.mouseX,\n      mouseY: this.mouseY,\n      x: this.x,\n      y: this.y,\n      size: this.size\n    };\n  }\n\n  display() {\n    this.p.loadImage(this.imgPathPrefix + this.data.filename, img => {\n        this.p.image(img, this.x - this.size/2, this.y - this.size/2);\n    });\n  }\n\n  displayPreview() {\n    console.log(\"\\nPreviewing image to be implemented\\n\");\n  }\n\n  displaySelected() {\n    this.p.noStroke();\n    this.p.fill(128,240,128);\n    this.p.rect(this.x-this.size/2-this.selected_border_width, this.y-this.size/2-this.selected_border_width, this.size+2*this.selected_border_width, this.size+2*this.selected_border_width);\n    this.p.loadImage(this.imgPathPrefix + this.data.filename, img => {\n        this.p.image(img, this.x - this.size/2, this.y - this.size/2);\n    });\n  }\n}\n\nexport default Entity;\n","export const types = {\n  CLEAR: \"CLEAR\",\n  PREVIEW: \"PREVIEW\",\n  SELECT: \"SELECT\"\n};\n\nexport const statuses = {\n  PLAIN: \"PLAIN\",\n  PREVIEWED: \"PREVIEWED\",\n  SELECTED: \"SELECTED\"\n};\n\nconst isMouseHit = (mouseX, mouseY, x, y, size) => ((mouseX - x)**2)/(size*size/4) +((mouseY - y)**2)/(size*size/4) < 1;\n\nconst inititalState = {\n  status: statuses.PLAIN,\n  position: {\n    mouseX: 0,\n    mouseY: 0,\n    x: 0,\n    y: 0,\n    size: 0\n  },\n  data: {\n    \"z\": [],\n    \"z_2d\": [],\n    \"filename\": \"\",\n    \"img_size\": 0\n  }\n};\n\nexport default function reducer(type, entity) {\n  switch (type) {\n    case types.CLEAR:\n      return displayPlainEntity(entity);\n    case types.PREVIEW:\n      return previewEntity(entity);\n    case types.SELECT:\n      return selectEntity(entity);\n    default:\n      return displayPlainEntity(entity);\n  }\n}\n\nfunction displayPlainEntity(entity) {\n  entity.display();\n  entity.status = statuses.PLAIN;\n  return null;\n}\n\nfunction previewEntity(entity) {\n  let isActive = isMouseHit(entity.mouseX, entity.mouseY, entity.x, entity.y, entity.size);\n  if (!isActive) {\n    return null;\n  }\n  entity.displayPreview();\n  entity.status = statuses.PREVIEWED;\n  return {\n    status: entity.status,\n    position: entity.position,\n    data: entity.data\n  };\n}\n\nfunction selectEntity(entity) {\n  let isActive = isMouseHit(entity.mouseX, entity.mouseY, entity.x, entity.y, entity.size);\n  if (!isActive) {\n    return null;\n  }\n  entity.displaySelected();\n  entity.status = statuses.SELECTED;\n  return {\n    status: entity.status,\n    position: entity.position,\n    data: entity.data\n  };\n}\n","import Entity from \"./entity.js\";\nimport entityActions from \"./entityActions.js\";\nimport { types as actionTypes } from \"./entityActions.js\";\nimport ce from \"../common/customEvents.js\";\n\nclass Visualization {\n  constructor(imgPathPrefix, data, containerDOM, parentWidth, parentHeight, bgColor = \"#000000\") {\n    this.imgPathPrefix = imgPathPrefix;\n    this.data = data;\n    this.containerDOM = containerDOM;\n    this.parentWidth = parentWidth;\n    this.parentHeight = parentHeight;\n    this.bgColor = bgColor;\n  }\n\n  sketch(p) {\n    p.setup = setup;\n    p.draw = draw;\n    p.mousePressed = mousePressed;\n    p.mouseReleased = mouseReleased;\n    p.mouseClicked = mouseClicked;\n\n    let self = this;\n    let entityList = [];\n    let startTime = 0;\n    let endTime = 0;\n    let checkpointTime = 0;\n    let longPressMs = 300;\n    let startMouseX = 0;\n    let startMouseY = 0;\n    let mouseClickMoveTolerance = 1e-13;\n\n    function setup() {\n      p.createCanvas(self.parentWidth, self.parentHeight);\n      for (let i = 0; i < self.data.length; i++) {\n        entityList.push(new Entity(self.imgPathPrefix, p, self.data[i]));\n      }\n      reset();\n      p.noLoop();\n\n      // Hook up events\n      self.containerDOM.addEventListener(ce.resetCanvas, reset);\n    }\n\n    function draw() {\n      let timeNow = Date.now();\n      let timeDifferenceMs = timeNow - checkpointTime;\n      if (timeDifferenceMs >= longPressMs &&\n          Math.abs(startMouseX - p.mouseX) < mouseClickMoveTolerance &&\n          Math.abs(startMouseY - p.mouseY) < mouseClickMoveTolerance) {\n        checkpointTime = timeNow;\n        select();\n      }\n    }\n\n    function mousePressed() {\n      startTime = Date.now();\n      checkpointTime = startTime;\n      startMouseX = p.mouseX;\n      startMouseY = p.mouseY;\n      p.loop();\n    }\n\n    function mouseReleased() {\n      endTime = Date.now();\n      p.noLoop();\n    }\n\n    function mouseClicked() {\n      let timeDifferenceMs = endTime - startTime;\n      if (timeDifferenceMs < longPressMs) {\n        preview();\n      }\n    }\n\n    function reset() {\n      p.background(self.bgColor);\n      for (let i = 0; i < self.data.length; i++) {\n        entityActions(actionTypes.CLEAR, entityList[i]);\n      }\n    }\n\n    function preview() { // Generally for previewing, not for selecting.\n      for (let i = 0; i < entityList.length; i++) {\n        let data = entityActions(actionTypes.PREVIEW, entityList[i]);\n        if (data) {\n          self.dispatch(ce.previewEntityObj(data));\n          return;\n        }\n      }\n    }\n\n    function select() { // Generally for selecting\n      for (let i = 0; i < entityList.length; i++) {\n        let data = entityActions(actionTypes.SELECT, entityList[i]);\n        if (data) {\n          self.dispatch(ce.selectEntityObj(data));\n          return;\n        }\n      }\n    }\n  }\n\n  dispatch(eventObject) {\n    this.containerDOM.dispatchEvent(eventObject);\n  }\n}\n\nexport default Visualization;\n"],"sourceRoot":""}